<div class="monster-form-container mat-elevation-z4">
  <h2 class="form-title">Create your Monster</h2>

  <form [formGroup]="formGroup" (submit)="submit($event)" class="monster-form">
    <!-- Name Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Monster Name</mat-label>
      <input matInput formControlName="name" placeholder="Enter monster name">
      <mat-icon matPrefix>pets</mat-icon>
      <mat-error *ngIf="formGroup.get('name')?.hasError('required')">
        Name is required
      </mat-error>
    </mat-form-field>

    <!-- Image Field -->
    <div class="image-upload-container">
      <button type="button" mat-stroked-button color="primary" (click)="fileInput.click()" class="upload-btn">
        <mat-icon>add_photo_alternate</mat-icon>
        Choose Image
      </button>
      <input hidden #fileInput type="file" (change)="onFileChange($event)">
      <span class="file-name" *ngIf="formGroup.get('image')?.value">
        {{ getFileName() }}
      </span>
      <mat-error *ngIf="isFieldValid('image')">
        Invalid image file
      </mat-error>
    </div>

    <!-- Type Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Monster Type</mat-label>
      <mat-select formControlName="type">
        <mat-option *ngFor="let type of monsterTypes" [value]="type">
          {{type}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="formGroup.get('type')?.hasError('required')">
        Type is required
      </mat-error>
    </mat-form-field>

    <!-- HP Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>HP</mat-label>
      <input matInput type="number" formControlName="hp" placeholder="Monster health points">
      <mat-icon matPrefix>favorite</mat-icon>
      <mat-error *ngIf="formGroup.get('hp')?.hasError('required')">
        HP is required
      </mat-error>
      <mat-error *ngIf="formGroup.get('hp')?.hasError('min')">
        HP must be greater than 0
      </mat-error>
      <mat-error *ngIf="formGroup.get('hp')?.hasError('max')">
        HP cannot exceed 200
      </mat-error>
    </mat-form-field>

    <!-- Figure Caption Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Figure Caption</mat-label>
      <input matInput formControlName="figureCaption" placeholder="Short description">
      <mat-icon matPrefix>description</mat-icon>
      <mat-error *ngIf="formGroup.get('figureCaption')?.hasError('required')">
        Figure caption is required
      </mat-error>
    </mat-form-field>

    <!-- Attack Name Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Attack Name</mat-label>
      <input matInput formControlName="attackName" placeholder="Name of the attack">
      <mat-icon matPrefix>flash_on</mat-icon>
      <mat-error *ngIf="formGroup.get('attackName')?.hasError('required')">
        Attack name is required
      </mat-error>
    </mat-form-field>

    <!-- Attack Strength Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Attack Strength</mat-label>
      <input matInput type="number" formControlName="attackStrength" placeholder="Strength points">
      <mat-icon matPrefix>trending_up</mat-icon>
      <mat-error *ngIf="formGroup.get('attackStrength')?.hasError('required')">
        Attack strength is required
      </mat-error>
      <mat-error *ngIf="formGroup.get('attackStrength')?.hasError('min')">
        Attack strength must be greater than 0
      </mat-error>
      <mat-error *ngIf="formGroup.get('attackStrength')?.hasError('max')">
        Attack strength cannot exceed 200
      </mat-error>
    </mat-form-field>

    <!-- Attack Description Field -->
    <mat-form-field appearance="outline" color="primary" class="form-field">
      <mat-label>Attack Description</mat-label>
      <textarea matInput formControlName="attackDescription" rows="3" placeholder="Describe the attack"></textarea>
      <mat-icon matPrefix>description</mat-icon>
      <mat-error *ngIf="formGroup.get('attackDescription')?.hasError('required')">
        Attack description is required
      </mat-error>
    </mat-form-field>

    <!-- Form Actions -->
    <div class="button-container">
      <button mat-stroked-button type="button" (click)="navigateBack()">
        <mat-icon>arrow_back</mat-icon> Back
      </button>
      <button mat-flat-button type="submit" color="primary" [disabled]="formGroup.invalid">
        <mat-icon>save</mat-icon> Save
      </button>
    </div>
  </form>
</div>
